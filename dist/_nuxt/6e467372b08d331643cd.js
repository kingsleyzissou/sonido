(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{359:function(t,e,r){var content=r(364);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("4366dfca",content,!0,{sourceMap:!1})},360:function(t,e,r){"use strict";r(17);e.a=function(t){return'<a href="/artists/'.concat(t.id,'">').concat(t.name,"</a>")}},361:function(t,e,r){"use strict";r(14);var n=r(0),o=r.n(n),l=r(20),c=r(360),d={props:{tracks:Array,full:{type:Boolean,default:!1}},components:{Table:l.f},data:function(){return{data:{songs:[]}}},mounted:function(){var t,data;return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.$axios.get("tracks",{params:{ids:this.trackIDs()}}));case 2:t=e.sent,data=t.data,this.data.songs=data.tracks;case 5:case"end":return e.stop()}}),null,this)},methods:{play:function(track){if(this.nowPlaying(track.id))return this.$unpause(this.$store);this.$play(track,this.$store,this.$axios)},pause:function(){this.$pause(this.$store,this.$axios)},unpause:function(){this.$unpause(this.$store,this.$axios)},trackIDs:function(){return this.tracks.map((function(track){return track.id})).join(",")},nowPlaying:function(t){return this.$store.state.transport.nowPlaying.id==t},addToPlaylist:function(track){this.$bus.$emit("add-to-playlist",track)}},computed:{songs:function(){return this.data.songs}},filters:{stringify:function(t){var e=t.length;return 1===e?Object(c.a)(t[0]):e<3?t.map((function(a){return Object(c.a)(a)})).join(", "):(t=t.slice(0,2)).map((function(a){return Object(c.a)(a)})).join(", ")+"..."},duration:function(time){var t=o.a.duration(time);return o.a.utc(t.asMilliseconds()).format("mm:ss")}}},m=(r(363),r(3)),component=Object(m.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("card",{staticClass:"card-plain"},[r("div",{staticClass:"table-full-width table-responsive"},[r("table",{staticClass:"table tablesorter"},[r("thead",[r("tr",[r("th",{attrs:{width:"5%"}}),t._v(" "),r("th",[t._v("Title")]),t._v(" "),t.full?r("th",[t._v("Artist")]):t._e(),t._v(" "),t.full?r("th",[t._v("Album")]):t._e(),t._v(" "),r("th",{attrs:{width:"5%"}}),t._v(" "),r("th",{attrs:{width:"5%"}}),t._v(" "),r("th",{staticClass:"text-right",attrs:{width:"8%"}},[t._v("Duration")]),t._v(" "),r("th",{attrs:{width:"5%"}},[t._v("Popularity")])])]),t._v(" "),r("tbody",t._l(t.songs,(function(track,e){return r("tr",{key:e},[track?[r("td",[t.nowPlaying(track.id)?[t.$store.state.transport.isPlaying?r("button",{staticClass:"btn btn-link",on:{click:t.pause}},[r("i",{staticClass:"tim-icons icon-button-pause"})]):r("button",{staticClass:"btn btn-link",on:{click:t.unpause}},[r("i",{staticClass:"tim-icons icon-triangle-right-17"})])]:[r("button",{staticClass:"btn btn-link",on:{click:function(e){return t.play(track)}}},[r("i",{staticClass:"tim-icons icon-triangle-right-17"})])]],2),t._v(" "),r("td",[t._v("\n                  "+t._s(track.name)+"Â \n                  "),track.explicit?r("span",{staticClass:"badge badge-outline badge-secondary"},[t._v("Explicit")]):t._e()]),t._v(" "),t.full?r("td",[r("span",{domProps:{innerHTML:t._s(t.$options.filters.stringify(track.artists))}})]):t._e(),t._v(" "),t.full?r("td",[r("nuxt-link",{staticClass:"text-primary",attrs:{to:"/albums/"+track.album.id}},[t._v(t._s(track.album.name))])],1):t._e(),t._v(" "),r("td",[r("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addToPlaylist(track)}}},[r("i",{staticClass:"tim-icons icon-simple-add text-primary"})])]),t._v(" "),r("td",{staticClass:"text-right"},[r("nuxt-link",{attrs:{to:"/tracks/"+track.id}},[r("i",{staticClass:"tim-icons icon-chart-bar-32 text-primary"})])],1),t._v(" "),r("td",{staticClass:"text-right"},[t._v(t._s(t._f("duration")(track.duration_ms)))]),t._v(" "),r("td",[r("div",{staticClass:"progress md-progress",staticStyle:{height:"8px"}},[r("div",{staticClass:"progress-bar bg-success",style:{width:track.popularity+"%",height:"8px"},attrs:{role:"progressbar","aria-valuenow":track.popularity,"aria-valuemin":"0","aria-valuemax":"100"}})])])]:t._e()],2)})),0)])])])],1)])}),[],!1,null,null,null);e.a=component.exports},363:function(t,e,r){"use strict";var n=r(359);r.n(n).a},364:function(t,e,r){(t.exports=r(15)(!1)).push([t.i,".card:hover>.card-img{opacity:.5}.toggler{display:block;padding:.25rem .75rem;font-size:.99925rem;line-height:1;background-color:transparent;border:.0625rem solid transparent;border-radius:.25rem;cursor:pointer;outline:none}.toggler-bar{display:block;position:relative;width:22px;height:1px;border-radius:1px;background:#fff}.toggler-kebab{margin-top:0;height:4px;width:4px;margin-bottom:3px;border-radius:50%}",""])},374:function(t,e,r){var content=r(394);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("f8750892",content,!0,{sourceMap:!1})},375:function(t,e,r){var content=r(396);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("555e2193",content,!0,{sourceMap:!1})},393:function(t,e,r){"use strict";var n=r(374);r.n(n).a},394:function(t,e,r){(t.exports=r(15)(!1)).push([t.i,".gradient-overlay{height:300px}",""])},395:function(t,e,r){"use strict";var n=r(375);r.n(n).a},396:function(t,e,r){(t.exports=r(15)(!1)).push([t.i,".table-borderless tr[data-v-2943742f]:hover{opacity:.8;background:#1e1e2f}",""])},410:function(t,e,r){"use strict";r.r(e);r(59),r(11),r(6),r(58);var n=r(21),o=(r(14),r(365)),l=r.n(o),c=(r(17),{props:["artist"],data:function(){return{loading:!0,data:{following:!1,hex:"",image:""}}},mounted:function(){var image,t,e,r,o;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:return image=this.artist.images.length>0?this.artist.images[0].url:"http://localhost:3000/img/placeholder-square.png",l.next=3,regeneratorRuntime.awrap(Promise.all([this.$axios.get("/me/following/contains?type=artist&ids=".concat(this.artist.id)),this.$axios.get("http://localhost:3000/api/image",{params:{image:image}})]));case 3:t=l.sent,e=Object(n.a)(t,2),r=e[0],o=e[1],this.loading=!1,this.data={following:r.data[0],hex:o.data,image:image};case 9:case"end":return l.stop()}}),null,this)},methods:{play:function(){this.$play(this.artist,this.$store,this.$axios)},follow:function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$axios.put("/me/following?type=artist",{ids:[this.artist.id]}));case 2:this.data.following=!0,this.notify("primary","Success! You are now following ".concat(this.artist.name));case 4:case"end":return t.stop()}}),null,this)},unfollow:function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$axios.delete("/me/following?type=artist",{data:{ids:[this.artist.id]}}));case 2:this.data.following=!1,this.notify("danger","Success! You have unfollowed ".concat(this.artist.name));case 4:case"end":return t.stop()}}),null,this)},notify:function(t,e){this.$notify({type:t,message:e,verticalAlign:"top",horizontalAlign:"right"})}},computed:{following:function(){return this.data.following},hex:function(){return this.data.hex},image:function(){return this.data.image}},filters:{humanReadable:function(t){return l()(t).format({thousandSeparated:!0,average:!0})}}}),d=(r(393),r(3)),m=Object(d.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-image gradient-overlay",style:{backgroundSize:"auto 400px",backgroundPosition:"top right",backgroundRepeat:"no-repeat",backgroundImage:"linear-gradient(to right, "+t.hex+" 55%, rgba(0,0,0,0)), url("+t.image+")"}}),t._v(" "),r("div",{staticClass:"card-img-overlay h-100 d-flex flex-column justify-content-end"},[r("h1",{staticClass:"card-title"},[t._v(t._s(t.artist.name))]),t._v(" "),r("h6",{staticClass:"card-subtitle mb-2 text-muted"},[t._v(t._s(t._f("humanReadable")(t.artist.followers.total))+" followers")]),t._v(" "),r("div",{staticClass:"mt-2 mb-2"},[t.following?r("base-button",{attrs:{round:"",simple:"",type:"primary"},on:{click:t.unfollow}},[t._v("Unfollow")]):r("base-button",{attrs:{round:"",type:"primary"},on:{click:t.follow}},[t._v("Follow")]),t._v(" "),r("base-button",{attrs:{round:"",simple:"",type:"success"},on:{click:t.play}},[t._v("Play")])],1)])])])])}),[],!1,null,null,null).exports,h=r(0),f=r.n(h),v={props:["artist"],data:function(){return{loading:!0,data:{album:{}}}},mounted:function(){var t,data,e,r,n;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(this.$axios.get("/artists/".concat(this.artist,"/albums")));case 2:t=o.sent,data=t.data,e=new f.a,r=data.items.filter((function(t){var r=f()(t.release_date,"YYYY-MM-DD");return f.a.duration(e.diff(r)).years()<1})),n=r.reduce((function(t,r){var n=f.a.duration(e.diff(r.release_date));return f.a.duration(e.diff(t.release_date))>n?r:t}),r[0]),this.data.album=n,this.loading=!1;case 9:case"end":return o.stop()}}),null,this)},computed:{album:function(){return this.data.album}}},_=Object(d.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("fragment",[t.album&&!t.loading?[r("card",{staticClass:"mb-0",attrs:{type:"plain"}},[r("h3",{staticClass:"mb-0"},[t._v("New Releases")])]),t._v(" "),t.album.images.length>0?r("card",{staticClass:"mb-0",attrs:{type:"plain"}},[r("nuxt-link",{staticClass:"text-white",attrs:{to:"/albums/"+t.album.id}},[t.album.images.length>0?r("div",{staticStyle:{width:"150px"}},[r("img",{staticStyle:{width:"150px"},attrs:{slot:"card-image",src:t.album.images[0].url,alt:"Profile pic"},slot:"card-image"})]):t._e(),t._v(" "),r("div",{staticStyle:{width:"150px"}},[r("h4",{staticClass:"card-title mt-0"},[t._v(t._s(t.album.name))])])])],1):t._e()]:t._e()],2)}),[],!1,null,null,null).exports,y=r(361),x={props:["artists"]},w=(r(395),Object(d.a)(x,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"table-full-width table-responsive"},[r("table",{staticClass:"table table-borderless"},[r("tbody",t._l(t.artists,(function(e,n){return r("nuxt-link",{key:n,staticStyle:{cursor:"pointer"},attrs:{tag:"tr",to:"/artists/"+e.id}},[r("td",[e.images.length>0?r("div",[r("img",{staticClass:"rounded-circle",staticStyle:{width:"40px",height:"40px"},attrs:{slot:"card-image",src:e.images[0].url,alt:"Profile pic"},slot:"card-image"})]):t._e()]),t._v(" "),r("td",{staticStyle:{"vertical-align":"center"}},[r("h6",{staticClass:"mb-0"},[t._v(t._s(e.name))])])])})),1)])])}),[],!1,null,"2943742f",null).exports),k={props:["album"],components:{Tracklist:y.a},data:function(){return{data:{tracks:[]}}},mounted:function(){var t,data;return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.$axios.get("/albums/".concat(this.album)));case 2:t=e.sent,data=t.data,this.data.tracks=data.tracks.items;case 5:case"end":return e.stop()}}),null,this)},computed:{tracks:function(){return this.data.tracks}}},C={props:["artist"],components:{Wrapper:Object(d.a)(k,(function(){var t=this.$createElement,e=this._self._c||t;return e("fragment",[this.tracks.length>0?e("div",[e("tracklist",{attrs:{tracks:this.tracks}})],1):this._e()])}),[],!1,null,null,null).exports},data:function(){return{data:{albums:[]}}},mounted:function(){var t,data;return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.$axios.get("/artists/".concat(this.artist,"/albums"),{params:{include_groups:this.type,country:"from_token"}}));case 2:t=e.sent,data=t.data,this.data.albums=data.items;case 5:case"end":return e.stop()}}),null,this)},computed:{albums:function(){return this.data.albums}},filters:{getYear:function(t){return f()(t,"YYYY-MM-DD").year()}}},$=Object(d.a)(C,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("card",[r("h3",{staticClass:"mb-0"},[t._v("Albums")]),t._v(" "),t._l(t.albums,(function(e,n){return r("fragment",{key:n},[n<5?[r("div",{staticClass:"d-flex align-items-end"},[r("div",{staticClass:"mr-4",staticStyle:{width:"150px",height:"100%"}},[r("img",{attrs:{src:e.images[0].url,alt:"Album cover"}})]),t._v(" "),r("div",{staticClass:"mr-2"},[r("h6",{staticClass:"mb-0"},[t._v(t._s(t._f("getYear")(e.release_date)))]),t._v(" "),r("h3",{staticClass:"album-title"},[t._v(t._s(e.name))])])]),t._v(" "),r("wrapper",{attrs:{album:e.id}})]:t._e()],2)}))],2)}),[],!1,null,null,null).exports,R={props:["artist"],data:function(){return{data:{summary:""}}},mounted:function(){var t,e,data,summary;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t="http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist=".concat(this.artist.name,"&api_key=").concat("2513a4a7bd2b7b0b32a7400e7d229cd2","&format=json"),r.next=3,regeneratorRuntime.awrap(this.$axios.get(t));case 3:e=r.sent,data=e.data,summary=data.artist.bio.summary.split("<a ")[0],this.data.summary=summary,this.$emit("mbid",data.artist.mbid);case 8:case"end":return r.stop()}}),null,this)},computed:{summary:function(){return this.data.summary}}},j=Object(d.a)(R,(function(){var t=this.$createElement,e=this._self._c||t;return e("card",{attrs:{type:"plain"}},[e("h3",{staticClass:"mb-0"},[this._v("Bio")]),this._v(" "),e("div",{staticClass:"text-white"},[e("div",[this._v(this._s(this.summary))])])])}),[],!1,null,null,null).exports,S={layout:"dashboard",components:{ArtistCard:m,NewReleases:_,Tracklist:y.a,Similar:w,Albums:$,Bio:j},data:function(){return{mbid:""}},asyncData:function(t){var e,r,o,l,c,d,m;return regeneratorRuntime.async((function(h){for(;;)switch(h.prev=h.next){case 0:return e=t.$axios,r=t.params,h.next=3,regeneratorRuntime.awrap(Promise.all([e.get("/artists/".concat(r.id)),e.get("/artists/".concat(r.id,"/related-artists")),e.get("/artists/".concat(r.id,"/top-tracks"),{params:{country:"from_token"}})]));case 3:return o=h.sent,l=Object(n.a)(o,3),c=l[0],d=l[1],m=l[2],h.abrupt("return",{artist:c.data,similar:d.data.artists,toptracks:m.data.tracks});case 9:case"end":return h.stop()}}))},methods:{change:function(t){this.mbid=t}},filters:{stripLink:function(summary){return summary.split("<a")[0]}}},P=Object(d.a)(S,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("fragment",[r("artist-card",{attrs:{artist:t.artist}}),t._v(" "),r("bio",{attrs:{artist:t.artist},on:{mbid:t.change}}),t._v(" "),r("div",{staticClass:"row d-flex flex-row"},[r("div",{staticClass:"col-8"},[r("card",{staticClass:"mb-0",staticStyle:{height:"100%"}},[r("new-releases",{attrs:{artist:t.$route.params.id}}),t._v(" "),r("card",{staticClass:"mb-0",attrs:{type:"plain"}},[r("h3",{staticClass:"mb-0"},[t._v("Top Tracks")])]),t._v(" "),r("tracklist",{attrs:{tracks:t.toptracks}})],1)],1),t._v(" "),r("div",{staticClass:"col-4"},[r("card",{staticClass:"mb-0",staticStyle:{height:"100%"}},[r("h3",{staticClass:"mb-1"},[t._v("Similar artists")]),t._v(" "),r("similar",{attrs:{artists:t.similar.slice(0,7)}})],1)],1)]),t._v(" "),r("hr"),t._v(" "),r("albums",{attrs:{artist:t.$route.params.id,type:"album"}})],1)}),[],!1,null,null,null);e.default=P.exports}}]);