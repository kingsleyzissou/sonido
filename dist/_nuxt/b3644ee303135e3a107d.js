(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{377:function(t,r,e){var content=e(400);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(16).default)("6655a852",content,!0,{sourceMap:!1})},378:function(t,r,e){var content=e(402);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(16).default)("7cabf328",content,!0,{sourceMap:!1})},399:function(t,r,e){"use strict";var n=e(377);e.n(n).a},400:function(t,r,e){(t.exports=e(15)(!1)).push([t.i,".card:hover>.card-img{opacity:.5}.toggler{display:block;padding:.25rem .75rem;font-size:.99925rem;line-height:1;background-color:transparent;border:.0625rem solid transparent;border-radius:.25rem;cursor:pointer;outline:none}.toggler-bar{display:block;position:relative;width:22px;height:1px;border-radius:1px;background:#fff}.toggler-kebab{margin-top:0;height:4px;width:4px;margin-bottom:3px;border-radius:50%}",""])},401:function(t,r,e){"use strict";var n=e(378);e.n(n).a},402:function(t,r,e){(t.exports=e(15)(!1)).push([t.i,".album-title[data-v-39f94f81]{font-size:36px;font-weight:700;margin-bottom:0}",""])},413:function(t,r,e){"use strict";e.r(r);e(14),e(17);var n=e(0),l=e.n(n),o=e(20),c=function(t){return'<a href="/artists/'.concat(t.id,'">').concat(t.name,"</a>")},d={props:["songs"],components:{Table:o.f},methods:{addToPlaylist:function(track){this.$bus.$emit("add-to-playlist",track)}},filters:{stringify:function(t){var r=t.length;return 1===r?c(t[0]):r<3?t.map((function(a){return c(a)})).join(", "):(t=t.slice(0,2)).map((function(a){return c(a)})).join(", ")+"..."},duration:function(time){var t=l.a.duration(time);return l.a.utc(t.asMilliseconds()).format("mm:ss")}}},f=(e(399),e(3)),v=Object(f.a)(d,(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("card",{staticClass:"card-plain"},[e("div",{staticClass:"table-full-width table-responsive"},[e("table",{staticClass:"table tablesorter"},[e("thead",[e("tr",[e("th",{attrs:{width:"5%"}}),t._v(" "),e("th",[t._v("Title")]),t._v(" "),e("th",[t._v("Artist")]),t._v(" "),e("th",[t._v("Album")]),t._v(" "),e("th"),t._v(" "),e("th",[t._v("Duration")]),t._v(" "),e("th",{attrs:{width:"8%"}},[t._v("Pop.")])])]),t._v(" "),e("tbody",t._l(t.songs,(function(r,n){return e("tr",{key:n},[r.track?[e("td",[e("i",{staticClass:"tim-icons icon-triangle-right-17"})]),t._v(" "),e("td",[t._v("\n                  "+t._s(r.track.name)+"Â \n                  "),r.track.explicit?e("span",{staticClass:"badge badge-outline badge-secondary"},[t._v("Explicit")]):t._e()]),t._v(" "),e("td",[e("span",{domProps:{innerHTML:t._s(t.$options.filters.stringify(r.track.artists))}})]),t._v(" "),e("td",[e("nuxt-link",{staticClass:"text-primary",attrs:{to:"/albums/"+r.track.album.id}},[t._v(t._s(r.track.album.name))])],1),t._v(" "),e("td",[e("dropdown",{staticClass:"nav-item",attrs:{"menu-on-right":"","title-tag":"a","menu-classes":"dropdown"}},[e("a",{attrs:{slot:"title","data-toggle":"dropdown","aria-expanded":"true"},slot:"title"},[e("button",{staticClass:"toggler",attrs:{type:"button"}},[e("span",{staticClass:"toggler-bar toggler-kebab"}),t._v(" "),e("span",{staticClass:"toggler-bar toggler-kebab"}),t._v(" "),e("span",{staticClass:"toggler-bar toggler-kebab"})])]),t._v(" "),e("li",{staticClass:"nav-link"},[e("a",{staticClass:"nav-item dropdown-item",attrs:{href:"/artists/"+r.track.artists[0].id}},[t._v("View artist")])]),t._v(" "),e("li",{staticClass:"nav-link"},[e("a",{staticClass:"nav-item dropdown-item",attrs:{href:"/albums/"+r.track.album.id}},[t._v("View album")])]),t._v(" "),e("li",{staticClass:"nav-link"},[e("a",{staticClass:"nav-item dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addToPlaylist(r.track)}}},[t._v("Add to playlist")])])])],1),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("duration")(r.track.duration_ms)))]),t._v(" "),e("td",[e("div",{staticClass:"progress md-progress",staticStyle:{height:"8px"}},[e("div",{staticClass:"progress-bar bg-success",style:{width:r.track.popularity+"%",height:"8px"},attrs:{role:"progressbar","aria-valuenow":r.track.popularity,"aria-valuemin":"0","aria-valuemax":"100"}})])])]:t._e()],2)})),0)])])])],1)])}),[],!1,null,null,null).exports,m=function(t){return'<a href="/artists/'.concat(t.id,'">').concat(t.name,"</a>")},h={props:["playlist"],data:function(){return{data:{following:!1}}},mounted:function(){var t,data;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.$axios.get("/playlists/".concat(this.playlist.id,"/followers/contains"),{params:{ids:this.$auth.$state.user.id}}));case 2:t=r.sent,data=t.data,this.loading=!1,this.data={following:data[0]};case 6:case"end":return r.stop()}}),null,this)},methods:{play:function(){this.$play(this.playlist,this.$store,this.$axios)},follow:function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$axios.put("/playlists/".concat(this.playlist.id,"/followers")));case 2:this.data.following=!0,this.notify("primary","Success! You are now following ".concat(this.playlist.name));case 4:case"end":return t.stop()}}),null,this)},unfollow:function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$axios.delete("/playlists/".concat(this.playlist.id,"/followers")));case 2:this.data.following=!1,this.notify("danger","Success! You have unfollowed ".concat(this.playlist.name));case 4:case"end":return t.stop()}}),null,this)},notify:function(t,r){this.$notify({type:t,message:r,verticalAlign:"top",horizontalAlign:"right"})}},computed:{following:function(){return this.data.following}},filters:{pluralise:function(t){return 1==t?"1 song":"".concat(t," songs")},getYear:function(t){return l()(t,"YYYY-MM-DD").year()},stringify:function(t){return 1===t.length?m(t[0]):t.map((function(a){return m(a)})).join(", ")}}},y=(e(401),{layout:"dashboard",components:{Songlist:v,PlaylistCard:Object(f.a)(h,(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("fragment",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card p-2"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"d-flex align-items-end"},[e("div",{staticClass:"mr-4",staticStyle:{width:"275px",height:"100%"}},[e("img",{attrs:{src:t.playlist.images[0].url,alt:"Album cover"}})]),t._v(" "),e("div",{staticClass:"mr-2"},[e("h6",{staticClass:"mb-0"},[t._v("Playlist")]),t._v(" "),e("h2",{staticClass:"album-title"},[t._v(t._s(t.playlist.name))]),t._v(" "),e("p",{staticClass:"card-text"},[t._v(t._s(t.playlist.description))]),t._v(" "),e("span",[t._v("by")]),t._v(" "),e("h6",{staticClass:"muted"},[e("nuxt-link",{attrs:{to:"/profile/"+t.playlist.owner.id}},[t._v(t._s(t.playlist.owner.display_name))])],1),t._v(" "),e("ul",{staticClass:"list-inline mb-2"},[e("li",{staticClass:"list-inline-item"},[t._v(t._s(t._f("pluralise")(t.playlist.tracks.items.length)))])]),t._v(" "),e("div",{staticClass:"mt-2 mb-2"},[t.following?e("base-button",{attrs:{round:"",simple:"",type:"primary"},on:{click:t.unfollow}},[t._v("Unfollow")]):e("base-button",{attrs:{round:"",type:"primary"},on:{click:t.follow}},[t._v("Follow")]),t._v(" "),e("base-button",{attrs:{round:"",simple:"",type:"success"},on:{click:t.play}},[t._v("Play")])],1)])])])])])])])}),[],!1,null,"39f94f81",null).exports},asyncData:function(t){var r,e,n,data;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:return r=t.$axios,e=t.params,l.next=3,regeneratorRuntime.awrap(r.get("/playlists/".concat(e.id)));case 3:return n=l.sent,data=n.data,l.abrupt("return",{playlist:data});case 6:case"end":return l.stop()}}))}}),_=Object(f.a)(y,(function(){var t=this.$createElement,r=this._self._c||t;return r("fragment",[r("playlist-card",{attrs:{playlist:this.playlist}}),this._v(" "),r("songlist",{attrs:{songs:this.playlist.tracks.items}})],1)}),[],!1,null,null,null);r.default=_.exports}}]);